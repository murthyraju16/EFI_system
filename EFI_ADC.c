/******************************************************************************
*                      Includes
******************************************************************************/

#include"EFI_ADC.h"
#include<avr/io.h>

/******************************************************************************
*                      Defines and data types
******************************************************************************/

/******************************************************************************
*                      Global variables
******************************************************************************/

/******************************************************************************
*                      Static variables
******************************************************************************/
/******************************************************************************
*                      Internal function prototypes
******************************************************************************/


/******************************************************************************
*                      Public functions
******************************************************************************/

void ADC_setup()
{

    ADMUX |= (1<<REFS0); /* Select Vref=AVcc */

 ADCSRA |= (1<<ADPS2)|(1<<ADPS1)|(1<<ADPS0); /*set prescaller to 128 and enable ADC */
}

uint16_t Read_ADC(uint8_t ADCchannel)
{

    ADMUX = (ADMUX & 0xF0)   | (ADCchannel & 0x0F);

    ADCSRA|=(1<<ADSC);

    while( ADCSRA & (1<<ADSC) ); /* wait until ADC conversion is complete */
   return ADC;
}


/******************************************************************************
*                      Internal functions
******************************************************************************/

/******************************************************************************
*                      End of File
******************************************************************************/
